<% content_for :js do %>

  <script type="text/javascript">
    $(function() {

      cdb.init();
      var pane = new cdb.ui.common.TabPane();
      window.pane = pane;

      View = cdb.core.View.extend({
        el: "li",
        initialize: function() {
          _.bindAll(this, "render", "show", "hide");

          this.template = cdb.templates.getTemplate('templates/form/demo');
          this.render();
        },

        render: function() {
          this.$el = $(this.template({name: this.options.name }));
          $("body").append(this.$el);
          return this.$el;
        },
        show: function() {
         this.$el.show();
        },
        hide: function() {
          this.$el.hide();
        }

      });

      var view   = new View({ name: "a"});
      var view2  = new View({ name: "b"});
      var view3  = new View({ name: "c"});

      pane.addTab('tab1', view);
      pane.addTab('tab2', view2);
      pane.addTab('tab3', view3);

      pane.bind('tabEnabled', function(tabName, tabView) {
        cdb.log.info("enabling", tabName);
        // tabView.show();
      });

      pane.bind('tabDisabled', function(tabName, tabView) {
        cdb.log.info("disabling", tabName);
        // tabView.hide();
      });

      Router = Backbone.Router.extend({
        routes: {
          "orders/new/:page": "page"
        },

        page: function(page) {
          cdb.log(page);
        }
      });


      window.router      = new Router();
      Backbone.history.start({ pushState: true });

    });
  </script>
<% end %>
